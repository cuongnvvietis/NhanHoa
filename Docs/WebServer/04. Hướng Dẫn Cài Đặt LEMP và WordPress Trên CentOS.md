
# H∆∞·ªõng D·∫´n C√†i ƒê·∫∑t LEMP v√† WordPress Tr√™n CentOS

LEMP (Linux, Nginx, MySQL, PHP) l√† stack ph·ªï bi·∫øn ƒë·ªÉ ch·∫°y WordPress. H∆∞·ªõng d·∫´n n√†y bao g·ªìm vi·ªác c√†i ƒë·∫∑t LEMP v√† tri·ªÉn khai WordPress.

---

## Ph·∫ßn 1: C√†i ƒê·∫∑t LEMP

### B∆∞·ªõc 1: C·∫≠p Nh·∫≠t H·ªá Th·ªëng
C·∫≠p nh·∫≠t c√°c g√≥i v√† repository:
```bash
sudo yum update -y
```

---

### B∆∞·ªõc 2: C√†i ƒê·∫∑t Nginx
1. **Th√™m EPEL repository:**
   ```bash
   sudo yum install epel-release -y
   ```

2. **C√†i ƒë·∫∑t Nginx:**
   ```bash
   sudo yum install nginx -y
   ```

3. **Kh·ªüi ƒë·ªông v√† k√≠ch ho·∫°t Nginx:**
   ```bash
   sudo systemctl start nginx
   sudo systemctl enable nginx
   ```

4. **M·ªü c·ªïng t∆∞·ªùng l·ª≠a cho HTTP v√† HTTPS:**
   ```bash
   sudo firewall-cmd --permanent --add-service=http
   sudo firewall-cmd --permanent --add-service=https
   sudo firewall-cmd --reload
   ```

5. **Ki·ªÉm tra Nginx ho·∫°t ƒë·ªông:**
   Truy c·∫≠p `http://<IP_c·ªßa_b·∫°n>` t·ª´ tr√¨nh duy·ªát. N·∫øu hi·ªÉn th·ªã trang m·∫∑c ƒë·ªãnh c·ªßa Nginx, c√†i ƒë·∫∑t th√†nh c√¥ng.

---

### B∆∞·ªõc 3: C√†i ƒê·∫∑t MySQL
1. **Th√™m repository MySQL:**
   ```bash
   sudo yum install https://dev.mysql.com/get/mysql80-community-release-el7-5.noarch.rpm -y
   ```

2. **C√†i ƒë·∫∑t MySQL:**
   ```bash
   sudo yum install mysql-community-server -y
   ```

3. **Kh·ªüi ƒë·ªông v√† k√≠ch ho·∫°t MySQL:**
   ```bash
   sudo systemctl start mysqld
   sudo systemctl enable mysqld
   ```

4. **L·∫•y m·∫≠t kh·∫©u root t·∫°m th·ªùi:**
   ```bash
   sudo grep 'temporary password' /var/log/mysqld.log
   ```

5. **C·∫•u h√¨nh b·∫£o m·∫≠t MySQL:**
   ```bash
   sudo mysql_secure_installation
   ```
   - Nh·∫≠p m·∫≠t kh·∫©u root t·∫°m th·ªùi.
   - ƒê·∫∑t m·∫≠t kh·∫©u m·ªõi cho root.
   - Tr·∫£ l·ªùi "Y" cho c√°c c√¢u h·ªèi b·∫£o m·∫≠t.

6. **Ki·ªÉm tra MySQL ho·∫°t ƒë·ªông:**
   ```bash
   mysql -u root -p
   ```
   Nh·∫≠p m·∫≠t kh·∫©u v√† ƒë·∫£m b·∫£o truy c·∫≠p th√†nh c√¥ng.

---

### B∆∞·ªõc 4: C√†i ƒê·∫∑t PHP
1. **Th√™m repository Remi:**
   ```bash
   sudo yum install https://rpms.remirepo.net/enterprise/remi-release-7.rpm -y
   sudo yum install yum-utils -y
   sudo yum-config-manager --enable remi-php81
   ```

2. **C√†i ƒë·∫∑t PHP v√† c√°c module c·∫ßn thi·∫øt:**
   ```bash
   sudo yum install php php-fpm php-mysqlnd php-opcache php-gd php-xml php-mbstring -y
   ```

3. **C·∫•u h√¨nh PHP-FPM:**
   M·ªü file c·∫•u h√¨nh:
   ```bash
   sudo vi /etc/php-fpm.d/www.conf
   ```
   T√¨m v√† ch·ªânh:
   ```
   user = nginx
   group = nginx
   ```

4. **Kh·ªüi ƒë·ªông v√† k√≠ch ho·∫°t PHP-FPM:**
   ```bash
   sudo systemctl start php-fpm
   sudo systemctl enable php-fpm
   ```

---

### B∆∞·ªõc 5: C·∫•u H√¨nh Nginx ƒê·ªÉ H·ªó Tr·ª£ PHP
1. **Ch·ªânh s·ª≠a file c·∫•u h√¨nh Nginx:**
   ```bash
   sudo vi /etc/nginx/conf.d/default.conf
   ```
   Th√™m n·ªôi dung sau:
   ```nginx
   server {
       listen 80;
       server_name your_domain_or_ip;

       root /usr/share/nginx/html;
       index index.php index.html index.htm;

       location / {
           try_files $uri $uri/ /index.php?$args;
       }

       location ~ \.php$ {
           include fastcgi_params;
           fastcgi_pass 127.0.0.1:9000;
           fastcgi_index index.php;
           fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
       }

       location ~ /\.ht {
           deny all;
       }
   }
   ```

2. **Ki·ªÉm tra c·∫•u h√¨nh Nginx:**
   ```bash
   sudo nginx -t
   ```

3. **Kh·ªüi ƒë·ªông l·∫°i Nginx:**
   ```bash
   sudo systemctl restart nginx
   ```

---

### B∆∞·ªõc 6: Ki·ªÉm Tra PHP
1. **T·∫°o file PHP ki·ªÉm tra:**
   ```bash
   echo "<?php phpinfo(); ?>" | sudo tee /usr/share/nginx/html/info.php
   ```

2. **Truy c·∫≠p tr√™n tr√¨nh duy·ªát:**
   Truy c·∫≠p `http://<IP_c·ªßa_b·∫°n>/info.php` ƒë·ªÉ xem th√¥ng tin PHP.

---

## Ph·∫ßn 2: C√†i ƒê·∫∑t WordPress

### B∆∞·ªõc 1: Chu·∫©n B·ªã Database Cho WordPress
1. **ƒêƒÉng nh·∫≠p v√†o MySQL:**
   ```bash
   mysql -u root -p
   ```

2. **T·∫°o database cho WordPress:**
   ```sql
   CREATE DATABASE wordpress_db;
   ```

3. **T·∫°o user cho database:**
   ```sql
   CREATE USER 'wordpress_user'@'localhost' IDENTIFIED BY 'your_password';
   GRANT ALL PRIVILEGES ON wordpress_db.* TO 'wordpress_user'@'localhost';
   FLUSH PRIVILEGES;
   EXIT;
   ```

---

### B∆∞·ªõc 2: C√†i ƒê·∫∑t WordPress
1. **Di chuy·ªÉn ƒë·∫øn th∆∞ m·ª•c Nginx:**
   ```bash
   cd /usr/share/nginx/html
   ```

2. **T·∫£i v·ªÅ v√† gi·∫£i n√©n WordPress:**
   ```bash
   sudo curl -O https://wordpress.org/latest.tar.gz
   sudo tar -xzvf latest.tar.gz
   sudo mv wordpress/* .
   sudo rm -rf wordpress latest.tar.gz
   ```

3. **C·∫•p quy·ªÅn cho WordPress:**
   ```bash
   sudo chown -R nginx:nginx /usr/share/nginx/html
   sudo chmod -R 755 /usr/share/nginx/html
   ```

---

### B∆∞·ªõc 3: C·∫•u H√¨nh WordPress
1. **T·∫°o file c·∫•u h√¨nh `wp-config.php`:**
   ```bash
   sudo mv wp-config-sample.php wp-config.php
   ```

2. **Ch·ªânh s·ª≠a `wp-config.php`:**
   ```bash
   sudo vi wp-config.php
   ```
   S·ª≠a th√¥ng tin database:
   ```php
   define('DB_NAME', 'wordpress_db');
   define('DB_USER', 'wordpress_user');
   define('DB_PASSWORD', 'your_password');
   define('DB_HOST', 'localhost');
   define('DB_CHARSET', 'utf8');
   define('DB_COLLATE', '');
   ```

---

### B∆∞·ªõc 4: Ho√†n T·∫•t C√†i ƒê·∫∑t Tr√™n Tr√¨nh Duy·ªát
1. Truy c·∫≠p `http://<IP_c·ªßa_b·∫°n>` t·ª´ tr√¨nh duy·ªát.
2. L√†m theo h∆∞·ªõng d·∫´n ƒë·ªÉ:
   - Ch·ªçn ng√¥n ng·ªØ.
   - Nh·∫≠p th√¥ng tin website (t√™n trang, t√†i kho·∫£n admin, m·∫≠t kh·∫©u, email).
   - Ho√†n t·∫•t c√†i ƒë·∫∑t.

---

## Ph·∫ßn 3: T·ªëi ∆Øu V√† B·∫£o M·∫≠t
1. **X√≥a file test PHP:**
   ```bash
   sudo rm /usr/share/nginx/html/info.php
   ```

2. **C·∫•u h√¨nh SELinux (n·∫øu c·∫ßn):**
   ```bash
   sudo setsebool -P httpd_can_network_connect on
   sudo setsebool -P httpd_unified on
   ```

3. **C·∫•u h√¨nh HTTPS v·ªõi Let's Encrypt (n·∫øu c·∫ßn):**
   ```bash
   sudo yum install certbot python3-certbot-nginx -y
   sudo certbot --nginx
   ```

---

Ch√∫c m·ª´ng b·∫°n ƒë√£ tri·ªÉn khai th√†nh c√¥ng **WordPress tr√™n LEMP Stack**! üéâ
